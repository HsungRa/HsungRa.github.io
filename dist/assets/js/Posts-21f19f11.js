import{_ as C,R as B,b as r,o as a,a as c,w as s,d as m,t as i,e as f,F as h,f as b,h as E,r as w,D as L,c as x,I as R}from"./index-9ec27557.js";import{P as D}from"./PostService-1ee90d0b.js";import{a as N}from"./ArticleService-fdc1476a.js";import"./todo-eb04d018.js";const O={data(){return{ROUTER_BLOG_PANEL:B}},props:{item:{type:Object,required:!0}}};function S(A,P,e,u,p,k){const y=r("category-menu-item",!0),v=r("el-sub-menu"),t=r("el-menu-item");return e.item.children&&e.item.children.length>0?(a(),c(v,{key:0,index:e.item.filePath},{title:s(()=>[m("span",null,i(e.item.name),1)]),default:s(()=>[(a(!0),f(h,null,b(e.item.children,o=>(a(),c(y,{key:o.filePath,item:o},null,8,["item"]))),128))]),_:1},8,["index"])):(a(),c(t,{key:1,index:e.item.filePath},{default:s(()=>[E(i(e.item.name),1)]),_:1},8,["index"]))}const T=C(O,[["render",S]]);const M={style:{margin:"8px 0",color:"#696c6c","font-size":"14px","font-family":"Arial,sans-serif","line-height":"1.6",overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2"}},V={style:{color:"#696c6c","font-size":"10px","font-family":"Arial,sans-serif"}},z={__name:"Posts",setup(A){const P=R(),e=w([]),u=w([]),p=t=>{try{if(!e.value[0])return;const o=(l,d)=>{if(l.filePath===d)return l;for(const g of l.children){const n=o(g,d);if(n)return n}return null},_=o(e.value[0],t);return _?_.posts.map(l=>(l.name=l.name.replace(".md",""),l)):[]}catch(o){throw console.error("获取文件列表失败:",o),new Error(`无法获取目录 ${t} 下的文件`)}},k=()=>{D.getLocalDirectoryTree().then(t=>{console.log(t),e.value=t.children,e.value.length>0&&(console.log(e.value),u.value=p(e.value[0].filePath))})},y=t=>{N.setCurrentArticle(t),P.push({path:"/blog"})},v=(t,o)=>{u.value=p(t)};return L(()=>{k()}),(t,o)=>{const _=r("el-menu"),l=r("el-aside"),d=r("el-card"),g=r("el-main");return a(),f(h,null,[x(l,{class:"el-aside-left"},{default:s(()=>[x(_,{"default-active":t.$route.path,class:"category-menu",onSelect:v,"active-text-color":"#f68b5d"},{default:s(()=>[(a(!0),f(h,null,b(e.value,n=>(a(),c(T,{key:n.filePath,item:n},null,8,["item"]))),128))]),_:1},8,["default-active"])]),_:1}),x(g,null,{default:s(()=>[(a(!0),f(h,null,b(u.value,n=>(a(),c(d,{style:{width:"70%"},shadow:"hover",onClick:F=>y(n)},{default:s(()=>[m("h2",null,i(n.name),1),m("p",M,i(n.summary),1),m("p",V,"Date "+i(n.lastModified),1)]),_:2},1032,["onClick"]))),256))]),_:1})],64)}}},q=C(z,[["__scopeId","data-v-6bb3d3d7"]]);export{q as default};
